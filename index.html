<!DOCTYPE html>
<html lang="en">
<meta charset="utf-8"/>
<meta name="robots" content="noindex,nofollow">

<head>
<title>Zoe and Peter's Wedding</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>

<body>
<h1>Peter and Zoe's wedding website </h1>
Under-development!

<div class="container">
  <form class="form-rsvp">
    <h2>RSVP Here</h2>
    <div class="collapse collapse-rsvpError">
      <h3 class="text-danger">Failed to update database</h3>
      <p id="rsvpErrorMsg"></p>
    </div>
    <div class="collapse collapse-rsvpSuccess">
      <h3 class="text-success">Success! Thank you for updating us.</h3>
    </div>
    <label for="rsvpName" class="sr-only">Name</label>
    <input type="text" id="rsvpName" class="form-control" placeholder="Name" required autofocus>
    <input type="button" id="rsvpSubmit" value="Submit">
  </form>
</div>
<br>
<div class="container">
  <h2>Registry</h2> 
  <p>Message TBD</p>
  <div class="row">
    <div class="col-md-4">
      <a href="https://www.w3schools.com/w3images/lights.jpg" target="_blank">
        <img src="https://www.w3schools.com/w3images/lights.jpg" alt="Lights" style="width:100%">
        <div class="caption">
          <p>The Aurora Borealis</p>
        </div>
      </a>
    </div>
  </div>
</div>

<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-database.js"></script>
<script src="https://www.gstatic.com/firebasejs/7.4.0/firebase-analytics.js"></script>
<script>
  $(document).ready(function(){
    $("#rsvpSubmit").click(function() {
      name = $("#rsvpName").val()
      console.log("Submitted: "+name)
      msg = saveRsvp(name)
      $("#rsvpName").val("")
    });
 
    // Initialize Firebase
    var firebaseConfig = {
      apiKey: "AIzaSyCPdEtSwodTo2Kg1LJk06bSmtGeIH1zyLk",
      authDomain: "zoepeter-fab29.firebaseapp.com",
      databaseURL: "https://zoepeter-fab29.firebaseio.com",
      projectId: "zoepeter-fab29",
      storageBucket: "zoepeter-fab29.appspot.com",
      messagingSenderId: "21329665131",
      appId: "1:21329665131:web:84d6180895af345140652e",
      measurementId: "G-5SP8B0650R"
    };
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    refreshRegistry();
  });

  function saveRsvp(name) {
    var rsvpObject = {
      name: name
    };
    firebase.database().ref('rsvps').push().set(rsvpObject).then(
      function(snapshot) {
        $(".collapse-rsvpSuccess").collapse("show")
        $(".collapse-rsvpError").collapse("hide")
      }, function(error) {
        $(".collapse-rsvpSuccess").collapse("hide")
        $(".collapse-rsvpError").collapse("show")
      }
    );
  }
  function refreshRegistry() {
    
  }
</script>

</body>
</html>

